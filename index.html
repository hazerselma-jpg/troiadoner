<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Troia D√∂ner | Online Sipari≈ü</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    body { background:#111; color:#f5f5f5; }
    a { text-decoration:none; }

    .page { max-width: 900px; margin: 0 auto; padding: 20px; }
    header { padding: 20px 0; text-align: center; border-bottom: 1px solid #333; }
    header h1 { font-size: 2.4rem; letter-spacing: .08em; text-transform: uppercase; }
    header h1 span { color: #f5c451; }
    header p { margin-top: 8px; color:#aaa; font-size:.95rem; }

    .hero { display:flex; flex-wrap:wrap; align-items:center; gap:20px; padding:30px 0; }
    .hero-text { flex:1 1 260px; }
    .hero-text h2 { font-size:1.6rem; margin-bottom:10px; }
    .hero-text p { color:#ccc; margin-bottom:15px; }
    .hero-tags { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:18px; }
    .tag { border:1px solid #444; padding:4px 10px; border-radius:999px; font-size:.8rem; color:#ccc; }

    .btn-main { display:inline-block; padding:12px 22px; border-radius:999px; background: linear-gradient(135deg,#f6d365,#fda085); color:#111; font-weight:600; }
    .btn-main small { display:block; font-size:.75rem; opacity:.8; }

    .hero-img { flex:1 1 260px; border-radius:16px; border:1px solid #333; padding:10px; background: radial-gradient(circle at top,#333 0,#111 55%); text-align:center; }
    .hero-img-inner { border-radius:12px; border:1px solid #444; padding:14px; }
    .hero-img h3 { margin-bottom:6px; }
    .hero-img p { font-size:.85rem; color:#bbb; }

    .menu { margin-top:10px; padding:20px 0; border-top:1px solid #333; }
    .menu h2 { margin-bottom:12px; font-size:1.3rem; }
    .menu-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(230px,1fr)); gap:14px; }

    .item { border:1px solid #333; border-radius:12px; padding:12px; background:#151515; }
    .item-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
    .item-name { font-weight:600; }
    .item-price { color:#f5c451; font-weight:600; }
    .item-desc { font-size:.85rem; color:#bbb; margin-bottom:8px; }
    .item-note { font-size:.75rem; color:#888; }

    .info { margin:25px 0; display:grid; gap:12px; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); }
    .info-box { border:1px solid #333; border-radius:12px; padding:12px; background:#151515; font-size:.9rem; }
    .info-box h3 { margin-bottom:6px; font-size:.95rem; color:#f5c451; }

    footer { border-top:1px solid #333; padding:14px 0; text-align:center; font-size:.8rem; color:#777; }

    @media (max-width:600px){
      header h1 { font-size:1.8rem; }
      .hero { padding:20px 0; }
    :root {
      --bg:#0d0c10;
      --bg-2:#15131c;
      --card:rgba(255,255,255,0.03);
      --card-2:rgba(255,255,255,0.06);
      --gold:#f5c451;
      --accent:#fda085;
      --text:#f5f5f7;
      --muted:#c8c7cc;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
    body{
      background:radial-gradient(120% 120% at 15% 10%, rgba(253,160,133,0.14), transparent 50%),
                 radial-gradient(160% 160% at 80% 0%, rgba(245,196,81,0.12), transparent 45%),
                 linear-gradient(145deg,var(--bg),var(--bg-2));
      color:var(--text);
      min-height:100vh;
      padding:18px;
    }
    a{color:inherit;text-decoration:none}

    .page{max-width:1180px;margin:0 auto;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.04);border-radius:18px;padding:22px;box-shadow:0 20px 60px rgba(0,0,0,0.55);backdrop-filter:blur(6px)}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,0.05)}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{width:48px;height:48px;object-fit:cover;border-radius:12px;border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.03)}
    header h1{font-size:1.9rem;letter-spacing:.08em;text-transform:uppercase}
    header h1 span{color:var(--gold)}
    header p{color:var(--muted);font-size:.95rem}
    .admin-link{font-size:.9rem;color:var(--gold);cursor:pointer;display:flex;align-items:center;gap:6px}

    .hero{display:grid;grid-template-columns:1.2fr 0.8fr;gap:16px;padding:18px 0}
    .hero-card{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.05);border-radius:16px;padding:18px;box-shadow:0 16px 40px rgba(0,0,0,0.45)}
    .hero h2{font-size:1.5rem;margin-bottom:6px}
    .hero .lead{color:#e8e8ea;margin-bottom:14px;line-height:1.5}
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:14px}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:var(--muted);font-size:.88rem}
    .cta{display:flex;flex-direction:column;gap:10px;margin-top:10px}
    .btn-main{background:linear-gradient(135deg,var(--gold),var(--accent));color:#111;font-weight:800;padding:12px 18px;border-radius:12px;border:none;cursor:pointer;box-shadow:0 14px 36px rgba(253,160,133,0.24)}
    .btn-ghost{border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.03);color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer}
    .stat-card{display:flex;flex-direction:column;gap:6px;}
    .stat-card strong{color:var(--gold)}

    .section{margin-top:18px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.04)}
    .section h2{margin-bottom:10px;font-size:1.3rem}

    .menu-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
    .card{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.05);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:8px;box-shadow:0 12px 30px rgba(0,0,0,0.4)}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:12px;border:1px solid rgba(255,255,255,0.05);background:rgba(0,0,0,0.35)}
    .card .title{font-weight:700;font-size:1rem}
    .card .price{color:var(--gold);font-weight:800}
    .card .desc{color:#e4e4e6;font-size:.93rem;line-height:1.4}
    .card .note{color:var(--muted);font-size:.85rem}
    .card .actions{display:flex;gap:8px;align-items:center}
    .qty-box{display:inline-flex;align-items:center;border:1px solid rgba(255,255,255,0.08);border-radius:10px;overflow:hidden}
    .qty-box button{background:rgba(255,255,255,0.03);border:none;color:var(--text);padding:8px 10px;cursor:pointer}
    .qty-box input{width:48px;text-align:center;border:none;background:rgba(255,255,255,0.03);color:var(--text);font-weight:700}

    .drinks{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
    .drink{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);border-radius:12px;padding:10px;display:flex;align-items:center;justify-content:space-between;gap:8px}
    .drink .info{display:flex;flex-direction:column;gap:4px}
    .drink .price{color:var(--gold);font-weight:800}
    .drink .qty{display:flex;gap:8px;align-items:center}
    .pill{background:rgba(255,255,255,0.04);padding:6px 10px;border-radius:999px;font-size:.9rem;color:var(--muted)}

    .cart-summary{position:fixed;top:22px;right:24px;background:rgba(0,0,0,0.55);border:1px solid rgba(255,255,255,0.08);backdrop-filter:blur(6px);padding:10px 12px;border-radius:12px;z-index:20;display:flex;gap:10px;align-items:center;cursor:pointer;box-shadow:0 14px 34px rgba(0,0,0,0.5)}
    .badge{background:var(--gold);color:#111;padding:6px 10px;border-radius:10px;font-weight:800}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:40;padding:12px}
    .modal.active{display:flex}
    .modal-card{background:rgba(20,18,26,0.95);border:1px solid rgba(255,255,255,0.08);border-radius:14px;max-width:840px;width:100%;max-height:90vh;overflow:auto;padding:16px;box-shadow:0 20px 50px rgba(0,0,0,0.55)}
    .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .modal-close{background:transparent;border:none;color:var(--text);font-size:1.2rem;cursor:pointer}

    .cart-list{display:flex;flex-direction:column;gap:10px}
    .cart-row{display:flex;gap:10px;align-items:flex-start;border-bottom:1px solid rgba(255,255,255,0.06);padding-bottom:8px}
    .cart-row strong{color:var(--gold)}
    .row-controls{margin-left:auto;display:flex;gap:6px;align-items:center}
    .row-controls button{border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.03);color:var(--text);border-radius:8px;padding:6px 8px;cursor:pointer}

    .totals{margin-top:12px;border-top:1px solid rgba(255,255,255,0.06);padding-top:10px;display:grid;gap:6px;font-weight:700}
    .total-line{display:flex;justify-content:space-between;color:var(--muted)}
    .grand{color:var(--gold);font-size:1.1rem}

    form .field{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
    form label{color:var(--muted);font-size:.92rem}
    form input, form select, form textarea{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);border-radius:10px;padding:10px;color:var(--text);font-size:.95rem}
    form textarea{min-height:80px}

    .otp-box{display:grid;gap:8px;background:rgba(255,255,255,0.02);border:1px dashed rgba(255,255,255,0.08);padding:10px;border-radius:12px}
    .preview{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);border-radius:12px;padding:10px;font-family:"IBM Plex Mono",monospace;font-size:.9rem;white-space:pre-wrap;color:#e9e8ef}

    .toast{position:fixed;bottom:20px;right:20px;background:#111;border:1px solid rgba(255,255,255,0.08);padding:10px 14px;border-radius:10px;opacity:0;transform:translateY(10px);transition:all .25s;z-index:50}
    .toast.show{opacity:1;transform:translateY(0)}

    .admin-panel{position:fixed;bottom:18px;left:18px;background:rgba(0,0,0,0.8);border:1px solid rgba(255,255,255,0.08);padding:12px;border-radius:12px;z-index:30;max-width:360px;width:92%;display:none;box-shadow:0 18px 40px rgba(0,0,0,0.5)}
    .admin-panel h3{margin-bottom:8px;color:var(--gold)}
    .admin-panel .field{margin-bottom:10px}
    .admin-panel label{font-size:.9rem;color:var(--muted)}
    .admin-panel input{width:100%;padding:8px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);border-radius:10px;color:var(--text)}

    @media(max-width:840px){
      header{flex-direction:column;align-items:flex-start}
      .hero{grid-template-columns:1fr;}
      .cart-summary{top:auto;bottom:18px;right:18px}
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>TROIA <span>D√ñNER</span></h1>
      <p>Tarihten gelen lezzet ¬∑ √áanakkale</p>
      <div class="brand">
        <img id="brandLogo" src="https://images.unsplash.com/photo-1604908177666-1c5c7351d0c1?auto=format&fit=crop&w=120&q=80" alt="Troia D√∂ner" />
        <div>
          <h1 id="brandTitle">TROIA <span>D√ñNER</span></h1>
          <p id="brandTagline">Tarihten gelen lezzet ‚Äì √áanakkale</p>
        </div>
      </div>
      <div class="admin-link" id="openAdmin">‚öôÔ∏è Admin Ayarlarƒ±</div>
    </header>

    <section class="hero">
      <div class="hero-text">
        <h2>Sƒ±cak, taze, sosu tam kararƒ±nda d√∂ner.</h2>
        <p>Aynƒ± anda hem sokak lezzeti, hem sessiz l√ºks. Troia D√∂ner ≈üimdi √ßevrim i√ßi sipari≈üle cebinde.</p>

        <div class="hero-tags">
          <span class="tag">üî• G√ºnl√ºk taze √ºr√ºn</span>
          <span class="tag">üöö Paket servis</span>
          <span class="tag">üìç √áanakkale merkez</span>
      <div class="hero-card">
        <h2>Premium lezzeti √ßevrim i√ßi sipari≈ü edin.</h2>
        <p class="lead">Altƒ±n tonlarƒ±nda modern aray√ºz, net men√º kartlarƒ± ve tek tƒ±kla WhatsApp sipari≈üi. Telefon ve adresiniz mesajda hazƒ±r.</p>
        <div class="chips">
          <span class="chip">üî• G√ºnl√ºk taze</span>
          <span class="chip">üöö Hƒ±zlƒ± teslimat</span>
          <span class="chip">üìç √áanakkale Merkez</span>
        </div>

        <!-- WHATSAPP NUMARANI BURAYA Gƒ∞RECEKSƒ∞N -->
        <a class="btn-main" href="https://wa.me/905000000000?text=Merhaba%2C%20Troia%20D%C3%B6ner%20i%C3%A7in%20sipari%C5%9F%20vermek%20istiyorum." target="_blank">
          WhatsApp‚Äôtan Sipari≈ü Ver
          <small>Sepetini yaz, hemen hazƒ±rlayalƒ±m.</small>
        </a>
      </div>

      <div class="hero-img">
        <div class="hero-img-inner">
          <h3>Bug√ºn√ºn √∂nerisi</h3>
          <p>Pilav√ºst√º tavuk d√∂ner + ayran ¬∑ sosu bol, soƒüan isteƒüe baƒülƒ±.</p>
        <div class="cta">
          <button class="btn-main" id="ctaScroll">Men√ºy√º ƒ∞ncele</button>
          <button class="btn-ghost" id="ctaCall">Ara: 0 (541) 578 85 07</button>
        </div>
      </div>
      <div class="hero-card stat-card">
        <strong>Sepet √ñzeti</strong>
        <div class="pill">Anƒ±nda WhatsApp‚Äôa g√∂nderim</div>
        <div class="pill">Adres & telefon otomatik eklenir</div>
        <div class="pill">SMS doƒürulama demo hazƒ±r</div>
      </div>
    </section>

    <section class="menu">
    <section class="section" id="menuSection">
      <h2>Men√º</h2>
      <div class="menu-grid">
        <div class="item">
          <div class="item-header">
            <span class="item-name">Pilav√ºst√º Tavuk D√∂ner</span>
            <span class="item-price">‚Ç∫ ‚Äî</span>
          </div>
          <p class="item-desc">Tane tane pirin√ß pilav √ºzerinde ince dilim tavuk d√∂ner, domates ve mor soƒüan e≈üliƒüinde.</p>
          <p class="item-note">Not: Soƒüan / sos tercihini sipari≈ü mesajƒ±nda yazabilirsin.</p>
        </div>
      <div id="menuContainer"></div>
    </section>

        <div class="item">
          <div class="item-header">
            <span class="item-name">Pilav√ºst√º Et D√∂ner</span>
            <span class="item-price">‚Ç∫ ‚Äî</span>
          </div>
          <p class="item-desc">Dana et d√∂ner, pilav, k√∂z biber ve domates ile premium sunum.</p>
          <p class="item-note">Not: Gramaj ve porsiyon bilgisi eklenecek.</p>
        </div>
    <section class="section">
      <h2>ƒ∞√ßecekler</h2>
      <div class="drinks" id="drinkContainer"></div>
    </section>

        <div class="item">
          <div class="item-header">
            <span class="item-name">Lava≈ü D√ºr√ºm</span>
            <span class="item-price">‚Ç∫ ‚Äî</span>
          </div>
          <p class="item-desc">√ñzel lava≈üta tavuk veya et d√∂ner, isteƒüe g√∂re tur≈üu biber ve sos.</p>
          <p class="item-note">Not: ƒ∞√ßindekileri sipari≈üte yazabilirsin.</p>
    <section class="section">
      <h2>Kƒ±sa Bilgi</h2>
      <div class="menu-grid">
        <div class="card">
          <div class="title">√áalƒ±≈üma Saatleri</div>
          <div class="desc">Her g√ºn 11:00 ‚Äì 23:00. Yoƒüun saat: 12:00 ‚Äì 14:00 ve 18:00 ‚Äì 21:00.</div>
        </div>

        <div class="item">
          <div class="item-header">
            <span class="item-name">ƒ∞√ßecekler</span>
            <span class="item-price">‚Ç∫ ‚Äî</span>
          </div>
          <p class="item-desc">Cam ≈üi≈üe ayran, kola, gazlƒ± i√ßecekler.</p>
          <p class="item-note">Not: Miktar ve marka tercihini mesajda belirt.</p>
        <div class="card">
          <div class="title">Konum</div>
          <div class="desc">Troia D√∂ner ¬∑ √áanakkale Merkez. <a style="color:var(--gold)" target="_blank" rel="noopener" href="https://maps.google.com/?q=Troia%20D%C3%B6ner%20%C3%87anakkale">Haritayƒ± a√ß</a></div>
        </div>
        <div class="card">
          <div class="title">Telefon</div>
          <div class="desc"><a id="telLink" href="tel:+905415788507">0 (541) 578 85 07</a> ¬∑ Arayarak ya da WhatsApp‚Äôtan sipari≈ü verebilirsiniz.</div>
        </div>
      </div>
    </section>
  </div>

  <div class="cart-summary" id="cartSummary">
    <span class="badge" id="cartCount">0</span>
    <div>
      <div style="font-weight:800">Sepet</div>
      <div style="color:var(--muted);font-size:.9rem" id="cartSummaryTotal">‚Ç∫ 0,00</div>
    </div>
  </div>

    <section class="info">
      <div class="info-box">
        <h3>√áalƒ±≈üma Saatleri</h3>
        <p>Her g√ºn: 11.00 ‚Äì 23.00<br/>Yoƒüun saat: 12.00 ‚Äì 14.00 / 18.00 ‚Äì 21.00</p>
  <div class="modal" id="cartModal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-header">
        <h3>Sepet</h3>
        <button class="modal-close" data-close="cartModal">‚úï</button>
      </div>
      <div class="info-box">
        <h3>Konum</h3>
        <p>Troia D√∂ner ¬∑ √áanakkale Merkez<br/>Google Haritalar linki buraya gelecek.</p>
      <div class="cart-list" id="cartList"></div>
      <div class="totals">
        <div class="total-line"><span>Ara toplam</span><span id="subTotal">‚Ç∫ 0,00</span></div>
        <div class="total-line"><span>Teslimat √ºcreti</span><span>‚Ç∫ 0,00</span></div>
        <div class="total-line grand"><span>Genel Toplam</span><span id="grandTotal">‚Ç∫ 0,00</span></div>
      </div>
      <div class="info-box">
        <h3>Telefon</h3>
        <p>0 (5xx) xxx xx xx<br/>Arayarak da sipari≈ü verebilirsiniz.</p>
      <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
        <button class="btn-ghost" id="clearCart">Sepeti Temizle</button>
        <button class="btn-main" id="checkoutOpen">Sipari≈üi Tamamla</button>
      </div>
    </section>
    </div>
  </div>

  <div class="modal" id="checkoutModal" aria-hidden="true">
    <div class="modal-card" style="max-width:900px">
      <div class="modal-header">
        <h3>Sipari≈ü Tamamlama</h3>
        <button class="modal-close" data-close="checkoutModal">‚úï</button>
      </div>
      <div style="display:grid;grid-template-columns:1.1fr 0.9fr;gap:12px">
        <form id="orderForm">
          <div class="field"><label>Ad Soyad *</label><input id="custName" required placeholder="√ñrn: Deniz Yƒ±lmaz" /></div>
          <div class="field"><label>Telefon *</label><input id="custPhone" required placeholder="05xx xxx xx xx" /></div>
          <div class="field"><label>Adres *</label><textarea id="custAddress" required placeholder="Mahalle, sokak, kapƒ± / daire"></textarea></div>
          <div class="field"><label>Teslimat Tipi</label><select id="deliveryType"><option>Adrese Teslim</option><option>Gel-Al</option></select></div>
          <div class="field"><label>Not</label><textarea id="custNote" placeholder="Soƒüansƒ±z, acƒ±lƒ± vb."></textarea></div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:4px">
            <button type="button" class="btn-main" id="sendOtp">Kodu G√∂nder</button>
            <button type="button" class="btn-ghost" id="verifyOtp">Kodu Onayla</button>
          </div>
          <div class="otp-box">
            <div class="field"><label>Demo OTP</label><input id="otpInput" placeholder="6 haneli kod" /></div>
            <small style="color:var(--muted)">"Kodu G√∂nder" tƒ±klanƒ±nca 6 haneli demo kod console.log ile g√∂r√ºn√ºr. Ger√ßek entegrasyon i√ßin a≈üaƒüƒ±daki POST isteƒüini kullanƒ±n.</small>
            <pre class="preview">// POST /api/send-otp { phone }
// fetch('/api/send-otp', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ phone }) });
// POST /api/verify-otp { phone, code }</pre>
          </div>
        </form>
        <div style="display:grid;gap:10px">
          <div class="preview" id="messagePreview">Sepetiniz ve adres/telefonunuz burada √∂nizlenir.</div>
          <button class="btn-main" id="finalizeBtn">WhatsApp‚Äôa G√∂nder</button>
          <div class="card" style="gap:6px">
            <div class="title">Nasƒ±l √ßalƒ±≈üƒ±r?</div>
            <div class="desc">1) Zorunlu alanlarƒ± doldur. 2) "Kodu G√∂nder" ile demo kod √ºret. 3) Kod doƒüruysa WhatsApp mesajƒ± i√ßinde √ºr√ºnler, √∂deme tutarƒ±, adres ve telefonun hazƒ±r olur.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

    <footer>
      Troia D√∂ner ¬∑ Tarihten gelen lezzet
    </footer>
  <div class="admin-panel" id="adminPanel">
    <h3>Admin Ayarlarƒ±</h3>
    <div class="field"><label>Logo URL</label><input id="logoInput" placeholder="https://..." /></div>
    <div class="field"><label>Ba≈ülƒ±k</label><input id="titleInput" placeholder="TROIA D√ñNER" /></div>
    <div class="field"><label>Slogan</label><input id="taglineInput" placeholder="Tarihten gelen lezzet ‚Äì √áanakkale" /></div>
    <div class="field"><label>WhatsApp Numarasƒ± (905xxxxxxxxx)</label><input id="waInput" placeholder="905415788507" /></div>
    <button class="btn-ghost" id="closeAdmin">Kapat</button>
  </div>

  <div class="toast" id="toast">Sepete eklendi</div>

  <script>
    // ---------- Config ----------
    const config = {
      branding:{
        logo:"https://images.unsplash.com/photo-1604908177666-1c5c7351d0c1?auto=format&fit=crop&w=120&q=80",
        title:"TROIA D√ñNER",
        tagline:"Tarihten gelen lezzet ‚Äì √áanakkale",
        whatsapp:"905415788507",
      },
      menuItems:[
        { id:1, kategori:"D√∂nerler", name:"Pilav√ºst√º Tavuk D√∂ner", price:250, descMain:"Tereyaƒülƒ± pilav √ºzerinde ince dilim tavuk d√∂ner.", descExtra:"Soƒüan ve sos tercihini mesajda belirtebilirsiniz.", image:"https://images.unsplash.com/photo-1606756790138-261d2b21cd65?auto=format&fit=crop&w=600&q=80" },
        { id:2, kategori:"D√∂nerler", name:"Pilav√ºst√º Et D√∂ner", price:320, descMain:"√ñzel marinasyonlu et d√∂ner, taze salata e≈üliƒüinde.", descExtra:"Kavrulmu≈ü biber ve domates ile.", image:"https://images.unsplash.com/photo-1604908177225-055f5ef19f9a?auto=format&fit=crop&w=600&q=80" },
        { id:3, kategori:"D√ºr√ºmler", name:"Lava≈ü D√ºr√ºm (Tavuk)", price:180, descMain:"Bol soslu lava≈üta tavuk d√∂ner, tur≈üu ve salata.", descExtra:"Acƒ± / mayonez tercihini ekleyin.", image:"https://images.unsplash.com/photo-1601050690597-df0568f70950?auto=format&fit=crop&w=600&q=80" },
        { id:4, kategori:"Tabaklar", name:"Et D√∂ner Tabak", price:340, descMain:"Izgara sebzeler ve tereyaƒülƒ± pilav ile et d√∂ner tabaƒüƒ±.", descExtra:"Yoƒüurtlu servis isteƒüe baƒülƒ±.", image:"https://images.unsplash.com/photo-1548943487-a2e4e43b4853?auto=format&fit=crop&w=600&q=80" },
        { id:5, kategori:"Ekstralar", name:"Patates Tabaƒüƒ±", price:70, descMain:"Dƒ±≈üƒ± √ßƒ±tƒ±r i√ßi yumu≈üak patates kƒ±zartmasƒ±.", descExtra:"Cheddar sos opsiyonel.", image:"https://images.unsplash.com/photo-1500219839284-2a5bcbb22c92?auto=format&fit=crop&w=600&q=80" }
      ],
      drinkItems:[
        { id:101, name:"Kola", price:50 },
        { id:102, name:"Ayran", price:35 },
        { id:103, name:"Su", price:20 },
        { id:104, name:"≈ûalgam", price:45 }
      ]
    };

    let cart = [];
    let otpCode = null;
    let otpVerified = false;

    // ---------- Helpers ----------
    const formatPrice = (n)=> '‚Ç∫ ' + Number(n||0).toFixed(2).replace('.',',');
    const toastEl = document.getElementById('toast');
    function showToast(msg){ toastEl.textContent = msg; toastEl.classList.add('show'); clearTimeout(toastEl._t); toastEl._t=setTimeout(()=>toastEl.classList.remove('show'),1600);}    
    function renderBranding(){
      document.getElementById('brandLogo').src = config.branding.logo;
      document.getElementById('brandTitle').innerHTML = `${config.branding.title.split(' ')[0]} <span>${(config.branding.title.split(' ')[1]||'')}</span>`;
      document.getElementById('brandTagline').textContent = config.branding.tagline;
      document.getElementById('telLink').textContent = formatPhone(config.branding.whatsapp);
      document.getElementById('telLink').href = `tel:+${config.branding.whatsapp}`;
      document.getElementById('ctaCall').textContent = 'Ara: '+formatPhone(config.branding.whatsapp);
    }
    function formatPhone(num){ if(!num) return ''; const n = num.replace(/\D/g,''); if(n.length===12) return `0 (${n.slice(2,5)}) ${n.slice(5,8)} ${n.slice(8,10)} ${n.slice(10,12)}`; if(n.length===11) return `${n.slice(0,1)} (${n.slice(1,4)}) ${n.slice(4,7)} ${n.slice(7,9)} ${n.slice(9,11)}`; return num; }

    // ---------- Menu Rendering ----------
    function groupByCategory(items){ return items.reduce((acc,it)=>{ (acc[it.kategori]=acc[it.kategori]||[]).push(it); return acc; },{}); }
    function renderMenu(){
      const container = document.getElementById('menuContainer');
      container.innerHTML = '';
      const grouped = groupByCategory(config.menuItems);
      Object.keys(grouped).forEach(cat=>{
        const block = document.createElement('div');
        block.style.marginBottom = '12px';
        block.innerHTML = `<div style="display:flex;align-items:center;justify-content:space-between;margin:6px 0 10px"><h3>${cat}</h3><span class="pill">${grouped[cat].length} √ºr√ºn</span></div>`;
        const grid = document.createElement('div'); grid.className='menu-grid';
        grouped[cat].forEach(item=>{
          const card = document.createElement('div'); card.className='card';
          card.innerHTML = `
            <img src="${item.image}" alt="${item.name}" />
            <div class="title">${item.name}</div>
            <div class="price">${formatPrice(item.price)}</div>
            <div class="desc">${item.descMain||''}</div>
            <div class="note">${item.descExtra||''}</div>
            <div class="actions">
              <div class="qty-box">
                <button data-step="-1">-</button>
                <input type="number" value="1" min="1" />
                <button data-step="1">+</button>
              </div>
              <button class="btn-main" data-add="food" data-id="${item.id}">Sepete Ekle</button>
            </div>
          `;
          card.querySelectorAll('[data-step]').forEach(btn=>{
            btn.addEventListener('click',()=>{
              const inp = card.querySelector('input');
              const next = Math.max(1, Number(inp.value||1)+Number(btn.dataset.step));
              inp.value = next;
            });
          });
          card.querySelector('[data-add]').addEventListener('click',()=>{
            const qty = Math.max(1, Number(card.querySelector('input').value||1));
            addToCart({ id:item.id, type:'food', name:item.name, price:item.price }, qty);
          });
          grid.appendChild(card);
        });
        block.appendChild(grid);
        container.appendChild(block);
      });
    }

    function renderDrinks(){
      const wrap = document.getElementById('drinkContainer'); wrap.innerHTML = '';
      config.drinkItems.forEach(dr=>{
        const row = document.createElement('div'); row.className='drink';
        row.innerHTML = `
          <div class="info"><div>${dr.name}</div><div class="price">${formatPrice(dr.price)}</div></div>
          <div class="qty">
            <button class="btn-ghost" data-minus>-</button>
            <input type="number" value="1" min="1" style="width:52px;text-align:center;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);color:var(--text);border-radius:10px;padding:6px" />
            <button class="btn-ghost" data-plus>+</button>
          </div>
          <button class="btn-main" data-add="drink" data-id="${dr.id}">Ekle</button>
        `;
        row.querySelector('[data-minus]').addEventListener('click',()=>{const inp=row.querySelector('input'); inp.value=Math.max(1,Number(inp.value||1)-1);});
        row.querySelector('[data-plus]').addEventListener('click',()=>{const inp=row.querySelector('input'); inp.value=Math.max(1,Number(inp.value||1)+1);});
        row.querySelector('[data-add]').addEventListener('click',()=>{
          const qty = Math.max(1, Number(row.querySelector('input').value||1));
          addToCart({ id:dr.id, type:'drink', name:dr.name, price:dr.price }, qty);
        });
        wrap.appendChild(row);
      });
    }

    // ---------- Cart ----------
    function addToCart(item, qty){
      const existing = cart.find(c=>c.id===item.id && c.type===item.type);
      if(existing){ existing.qty += qty; }
      else cart.push({...item, qty});
      updateCartUI();
      showToast('Sepete eklendi');
    }
    function updateCartUI(){
      const count = cart.reduce((s,i)=>s+i.qty,0);
      const total = cart.reduce((s,i)=>s + i.price*i.qty,0);
      document.getElementById('cartCount').textContent = count;
      document.getElementById('cartSummaryTotal').textContent = formatPrice(total);
      renderCartList();
      updatePreview();
    }
    function renderCartList(){
      const list = document.getElementById('cartList'); list.innerHTML='';
      cart.forEach((it,idx)=>{
        const row = document.createElement('div'); row.className='cart-row';
        row.innerHTML = `
          <div>
            <div style="font-weight:700">${it.name}</div>
            <div style="color:var(--muted)">${formatPrice(it.price)} ¬∑ ${it.type==='drink'?'ƒ∞√ßecek':'Yemek'}</div>
          </div>
          <div class="row-controls">
            <button data-act="-" data-idx="${idx}">-</button>
            <span>${it.qty}</span>
            <button data-act="+" data-idx="${idx}">+</button>
            <button data-act="rm" data-idx="${idx}">‚úï</button>
            <strong>${formatPrice(it.price*it.qty)}</strong>
          </div>`;
        list.appendChild(row);
      });
      const sub = cart.reduce((s,i)=>s + i.price*i.qty,0);
      document.getElementById('subTotal').textContent = formatPrice(sub);
      document.getElementById('grandTotal').textContent = formatPrice(sub);

      list.querySelectorAll('button').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const idx = Number(btn.dataset.idx);
          if(btn.dataset.act==='+') cart[idx].qty += 1;
          if(btn.dataset.act==='-') cart[idx].qty = Math.max(1, cart[idx].qty-1);
          if(btn.dataset.act==='rm') cart.splice(idx,1);
          updateCartUI();
        });
      });
    }

    document.getElementById('cartSummary').addEventListener('click',()=>toggleModal('cartModal',true));
    document.querySelectorAll('.modal-close').forEach(btn=>btn.addEventListener('click',()=>toggleModal(btn.dataset.close,false)));
    function toggleModal(id,show){
      const el=document.getElementById(id); if(!el) return; el.classList[show?'add':'remove']('active'); el.setAttribute('aria-hidden',show?'false':'true');
      if(show && id==='cartModal') renderCartList();
    }

    document.getElementById('clearCart').addEventListener('click',()=>{cart=[];updateCartUI();});
    document.getElementById('checkoutOpen').addEventListener('click',()=>{
      if(cart.length===0){showToast('Sepet bo≈ü');return;}
      toggleModal('checkoutModal',true);
      updatePreview();
    });

    // ---------- Checkout & OTP ----------
    document.getElementById('ctaScroll').addEventListener('click',()=>document.getElementById('menuSection').scrollIntoView({behavior:'smooth'}));
    document.getElementById('ctaCall').addEventListener('click',()=>{
      window.location.href = document.getElementById('telLink').href;
    });

    document.getElementById('sendOtp').addEventListener('click',()=>{
      const phone = document.getElementById('custPhone').value.trim();
      if(!phone){ alert('Telefon girin'); return; }
      otpCode = Math.floor(100000 + Math.random()*900000).toString();
      otpVerified = false;
      console.log('Demo OTP kodu:', otpCode);
      /* Ger√ßek SMS i√ßin √∂rnek:
      fetch('/api/send-otp', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ phone })
      });
      */
      showToast('Demo kod √ºretildi (console.log)');
    });

    document.getElementById('verifyOtp').addEventListener('click',()=>{
      const val = document.getElementById('otpInput').value.trim();
      if(!otpCode){ alert('√ñnce kod g√∂nderin'); return; }
      if(val === otpCode){ otpVerified=true; showToast('Doƒürulama ba≈üarƒ±lƒ±'); }
      else { otpVerified=false; alert('Kod yanlƒ±≈ü'); }
    });

    function buildMessage(){
      const name = document.getElementById('custName').value.trim();
      const phone = document.getElementById('custPhone').value.trim();
      const addr = document.getElementById('custAddress').value.trim();
      const type = document.getElementById('deliveryType').value;
      const note = document.getElementById('custNote').value.trim();
      const total = cart.reduce((s,i)=>s + i.price*i.qty,0);
      let msg = `Troia D√∂ner sipari≈ü talebi%0A`;
      cart.forEach((i,idx)=>{
        msg += `${idx+1}) ${i.name} x${i.qty} - ${formatPrice(i.price*i.qty)}%0A`;
      });
      msg += `%0A√ñdeme Tutari: ${formatPrice(total)}%0A`;
      msg += `Teslimat: ${type}%0A`;
      msg += `Adres: ${addr || '-'}%0A`;
      msg += `Telefon: ${phone || '-'}%0A`;
      if(note) msg += `Not: ${encodeURIComponent(note)}%0A`;
      msg += `M√º≈üteri: ${encodeURIComponent(name || '-')}`;
      return msg;
    }

    function updatePreview(){
      const total = cart.reduce((s,i)=>s + i.price*i.qty,0);
      let text = 'Sipari≈ü √ñnizleme\n';
      cart.forEach((i,idx)=>{ text += `${idx+1}) ${i.name} x${i.qty} = ${formatPrice(i.price*i.qty)}\n`; });
      text += `\n√ñdeme Tutarƒ±: ${formatPrice(total)}\nAdres: ${(document.getElementById('custAddress').value||'-')}\nTelefon: ${(document.getElementById('custPhone').value||'-')}\nTeslimat: ${document.getElementById('deliveryType').value}`;
      const note = document.getElementById('custNote').value; if(note) text += `\nNot: ${note}`;
      document.getElementById('messagePreview').textContent = text;
    }
    ['custName','custPhone','custAddress','deliveryType','custNote'].forEach(id=>{
      const el=document.getElementById(id); el.addEventListener('input',updatePreview); el.addEventListener('change',updatePreview);
    });

    document.getElementById('finalizeBtn').addEventListener('click',()=>{
      if(cart.length===0){ alert('Sepet bo≈ü'); return; }
      const required = ['custName','custPhone','custAddress'];
      for(const id of required){ if(!document.getElementById(id).value.trim()){ alert('L√ºtfen zorunlu alanlarƒ± doldurun'); return; } }
      if(!otpVerified){ alert('L√ºtfen SMS kodunu onaylayƒ±n'); return; }
      const waNumber = config.branding.whatsapp || '905000000000';
      const waText = buildMessage();
      window.location.href = `https://api.whatsapp.com/send?phone=${waNumber}&text=${waText}`;
    });

    // ---------- Admin ----------
    document.getElementById('openAdmin').addEventListener('click',()=>{document.getElementById('adminPanel').style.display='block'; document.getElementById('logoInput').value=config.branding.logo; document.getElementById('titleInput').value=config.branding.title; document.getElementById('taglineInput').value=config.branding.tagline; document.getElementById('waInput').value=config.branding.whatsapp;});
    document.getElementById('closeAdmin').addEventListener('click',()=>document.getElementById('adminPanel').style.display='none');
    document.getElementById('logoInput').addEventListener('input',e=>{config.branding.logo=e.target.value; renderBranding();});
    document.getElementById('titleInput').addEventListener('input',e=>{config.branding.title=e.target.value||'TROIA D√ñNER'; renderBranding();});
    document.getElementById('taglineInput').addEventListener('input',e=>{config.branding.tagline=e.target.value; renderBranding();});
    document.getElementById('waInput').addEventListener('input',e=>{config.branding.whatsapp=e.target.value.replace(/\D/g,''); renderBranding(); updatePreview();});

    // ---------- Init ----------
    renderBranding();
    renderMenu();
    renderDrinks();
    updateCartUI();
  </script>
</body>
</html>
