<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Troia D√∂ner | Online Sipari≈ü</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing:border-box; margin:0; padding:0; font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif; }
    body { background:radial-gradient(circle at top,#3a2a1b 0,#05040a 55%); color:#f5f5f5; }

    a { color:inherit; text-decoration:none; }
    button { cursor:pointer; }

    .page { max-width:1040px; margin:0 auto; padding:18px 16px 40px; }

    /* √úST AYAR PANELƒ∞ (sadece senin i√ßin mini admin) */
    .settings { padding:8px 10px; border-radius:10px; border:1px solid rgba(255,255,255,0.18); background:rgba(0,0,0,0.4); margin-bottom:14px; font-size:.8rem; }
    .settings h4 { font-size:.85rem; margin-bottom:4px; opacity:.9; }
    .settings-row { display:flex; flex-wrap:wrap; gap:6px; margin-bottom:4px; }
    .settings-row label { flex:1 1 120px; }
    .settings-row input { width:100%; padding:4px 6px; border-radius:6px; border:1px solid rgba(255,255,255,0.25); background:#151219; color:#f5f5f5; font-size:.8rem; }

    header { text-align:center; padding:10px 0 18px; border-bottom:1px solid rgba(255,255,255,0.08); }
    header img { height:42px; margin-bottom:6px; object-fit:contain; }
    header h1 { font-size:2.1rem; letter-spacing:.18em; text-transform:uppercase; }
    header h1 span { color:#f5c451; }
    header p { margin-top:4px; color:#c8c8c8; font-size:.9rem; }

    .hero { display:flex; flex-wrap:wrap; gap:18px; padding:18px 0 10px; align-items:flex-start; }
    .hero-left { flex:1 1 260px; }
    .hero-right { flex:1 1 260px; }

    .hero-title { font-size:1.5rem; margin-bottom:6px; }
    .hero-text { font-size:.95rem; color:#dcdcdc; margin-bottom:10px; }

    .tags { display:flex; flex-wrap:wrap; gap:6px; margin-bottom:12px; }
    .tag { border-radius:999px; border:1px solid rgba(255,255,255,0.2); padding:3px 10px; font-size:.75rem; background:rgba(0,0,0,0.35); }

    .btn-main { display:inline-flex; flex-direction:column; align-items:flex-start; border-radius:999px;
      background:linear-gradient(135deg,#f6d365,#fda085); color:#1b120a; border:none;
      padding:9px 18px; font-size:.95rem; font-weight:600; margin-bottom:8px;
    }
    .btn-main small { font-size:.75rem; opacity:.8; }

    .today-box { border-radius:14px; border:1px solid rgba(255,255,255,0.18); padding:10px 14px; background:rgba(0,0,0,0.4); }
    .today-box h3 { font-size:.9rem; text-transform:uppercase; letter-spacing:.08em; color:#f4c76b; margin-bottom:4px; }
    .today-box p { font-size:.85rem; color:#e3e3e3; }

    .panel { border-radius:14px; border:1px solid rgba(255,255,255,0.2); padding:10px 12px; background:rgba(0,0,0,0.5); max-height:340px; overflow-y:auto; font-size:.8rem; }
    .panel h3 { font-size:.9rem; margin-bottom:2px; }
    .panel small { color:#bcbcbc; }

    .menu-section { margin-top:20px; }
    .menu-head { display:flex; justify-content:space-between; align-items:flex-end; gap:8px; margin-bottom:8px; }
    .menu-head h2 { font-size:1.2rem; }
    .menu-head small { font-size:.8rem; color:#c5c5c5; }

    .menu-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:10px; }

    .card { border-radius:14px; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.55); padding:10px 11px; display:flex; flex-direction:column; gap:6px; }
    .card-top { display:flex; justify-content:space-between; gap:8px; align-items:flex-start; }
    .card-title { font-size:.95rem; font-weight:600; }
    .card-price { font-size:.95rem; font-weight:600; color:#f6c55b; }
    .card-desc { font-size:.8rem; color:#d3d3d3; }
    .card-extra { font-size:.75rem; color:#bcbcbc; }
    .card-actions { display:flex; justify-content:space-between; align-items:center; margin-top:4px; }
    .btn-add { border-radius:999px; border:1px solid rgba(255,255,255,0.25); padding:4px 10px; font-size:.8rem; background:rgba(255,255,255,0.06); }

    .badge-cat { font-size:.68rem; padding:2px 6px; border-radius:999px; border:1px solid rgba(255,255,255,0.25); opacity:.85; }

    /* ƒ∞√ßecekler */
    .drink-row { display:flex; justify-content:space-between; align-items:center; padding:5px 6px; border-radius:10px; border:1px solid rgba(255,255,255,0.12); margin-bottom:5px; background:rgba(0,0,0,0.55); }
    .drink-name { font-size:.9rem; }
    .drink-price { font-size:.85rem; color:#f6c55b; margin-right:6px; }
    .qty-box { display:flex; align-items:center; gap:4px; }
    .qty-box button { width:22px; height:22px; border-radius:999px; border:1px solid rgba(255,255,255,0.3); background:transparent; color:#f5f5f5; font-size:.8rem; line-height:1; }
    .qty-box span { min-width:18px; text-align:center; font-size:.85rem; }

    /* Sepet */
    .top-bar { display:flex; justify-content:flex-end; margin-top:6px; }
    .cart-btn { position:relative; border-radius:999px; border:1px solid rgba(255,255,255,0.3); background:rgba(0,0,0,0.6); padding:4px 12px; font-size:.8rem; }
    .cart-count { position:absolute; top:-5px; right:-5px; background:#f25f5c; color:#fff; border-radius:999px; font-size:.7rem; padding:1px 5px; }

    .cart-panel { position:fixed; right:10px; top:10px; width:310px; max-height:90vh; background:#0b090f; border-radius:14px; border:1px solid rgba(255,255,255,0.18); padding:10px; box-shadow:0 16px 40px rgba(0,0,0,0.7); display:none; flex-direction:column; z-index:30; }
    .cart-panel.open { display:flex; }
    .cart-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
    .cart-header h3 { font-size:.95rem; }
    .cart-list { flex:1; overflow-y:auto; padding-right:4px; margin-bottom:6px; }
    .cart-item { border-bottom:1px dashed rgba(255,255,255,0.12); padding:4px 0; font-size:.8rem; }
    .cart-item-top { display:flex; justify-content:space-between; }
    .cart-item-bottom { display:flex; justify-content:space-between; align-items:center; margin-top:3px; }
    .cart-footer { border-top:1px solid rgba(255,255,255,0.18); padding-top:6px; font-size:.82rem; }
    .btn-checkout { width:100%; margin-top:6px; padding:6px 10px; border-radius:999px; border:none; background:linear-gradient(135deg,#f6d365,#fda085); color:#1b120a; font-weight:600; font-size:.9rem; }

    /* Modal */
    .modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.75); display:none; align-items:center; justify-content:center; z-index:40; }
    .modal-backdrop.open { display:flex; }
    .modal { width:100%; max-width:420px; background:#0d0a12; border-radius:16px; border:1px solid rgba(255,255,255,0.2); padding:14px 14px 16px; font-size:.85rem; }
    .modal h3 { font-size:1rem; margin-bottom:6px; }
    .modal-row { margin-bottom:6px; }
    .modal-row label { display:block; font-size:.78rem; margin-bottom:2px; color:#d0d0d0; }
    .modal-row input, .modal-row textarea, .modal-row select { width:100%; padding:5px 7px; border-radius:8px; border:1px solid rgba(255,255,255,0.25); background:#15121b; color:#f5f5f5; font-size:.82rem; }
    .modal-row textarea { resize:vertical; min-height:50px; }
    .modal-actions { display:flex; justify-content:flex-end; gap:6px; margin-top:6px; }
    .btn-secondary { padding:5px 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.3); background:transparent; color:#f5f5f5; font-size:.8rem; }
    .btn-primary { padding:5px 10px; border-radius:999px; border:none; background:#f6c55b; color:#20160a; font-size:.85rem; font-weight:600; }

    .otp-row { display:flex; gap:6px; margin-top:4px; }
    .otp-row input { flex:1; }

    .note { font-size:.76rem; color:#bcbcbc; margin-top:2px; }

    .toast { position:fixed; left:50%; transform:translateX(-50%); bottom:16px; padding:6px 12px; border-radius:999px; background:#22202a; border:1px solid rgba(255,255,255,0.3); font-size:.8rem; display:none; z-index:60; }
    .toast.show { display:block; }

    @media (max-width:720px) {
      .cart-panel { width:92vw; right:4vw; }
      header h1 { font-size:1.6rem; letter-spacing:.12em; }
      .hero { flex-direction:column; }
    }
  </style>
</head>
<body>
<div class="page">

  <!-- Mini Ayar Paneli -->
  <div class="settings">
    <h4>‚öô Troia D√∂ner Site Ayarlarƒ± (sadece bu tarayƒ±cƒ±da ge√ßerli)</h4>
    <div class="settings-row">
      <label>
        Logo URL:
        <input id="setLogo" placeholder="Bo≈ü bƒ±rakabilirsin" />
      </label>
      <label>
        Ba≈ülƒ±k:
        <input id="setTitle" value="TROIA D√ñNER" />
      </label>
    </div>
    <div class="settings-row">
      <label>
        Slogan:
        <input id="setSlogan" value="Tarihten gelen lezzet ¬∑ √áanakkale" />
      </label>
      <label>
        WhatsApp Numarasƒ± (905XXXXXXXXX):
        <input id="setWa" value="905000000000" />
      </label>
    </div>
  </div>

  <header>
    <img id="logoImg" alt="Troia D√∂ner" style="display:none" />
    <h1 id="siteTitle"><span>TROIA</span> D√ñNER</h1>
    <p id="siteSlogan">Tarihten gelen lezzet ¬∑ √áanakkale</p>
  </header>

  <div class="top-bar">
    <button class="cart-btn" onclick="toggleCart()">
      Sepetim
      <span class="cart-count" id="cartCount">0</span>
    </button>
  </div>

  <section class="hero">
    <div class="hero-left">
      <h2 class="hero-title">Sƒ±cak, taze, sosu tam kararƒ±nda d√∂ner.</h2>
      <p class="hero-text">
        Aynƒ± anda hem sokak lezzeti, hem sessiz l√ºks. Troia D√∂ner ≈üimdi
        √ßevrim i√ßi sipari≈üle cebinde.
      </p>
      <div class="tags">
        <div class="tag">üî• G√ºnl√ºk taze √ºr√ºn</div>
        <div class="tag">üì¶ Paket servis</div>
        <div class="tag">üìç √áanakkale merkez</div>
      </div>
      <button class="btn-main" onclick="scrollToMenu()">
        WhatsApp‚Äôtan Sipari≈ü Ver
        <small>Sepetini hazƒ±rla, mesajƒ±n otomatik olu≈üsun.</small>
      </button>
      <div class="today-box">
        <h3>Bug√ºn√ºn √∂nerisi</h3>
        <p>Pilav√ºst√º tavuk d√∂ner + ayran ¬∑ sosu bol, soƒüan isteƒüe baƒülƒ±.</p>
      </div>
    </div>

    <div class="hero-right">
      <div class="panel">
        <h3>Men√º d√ºzeni √∂rneƒüi</h3>
        <small>Bu panel sadece bilgi ama√ßlƒ±, ger√ßek men√º a≈üaƒüƒ±da.</small>
        <p style="margin-top:6px; line-height:1.4;">
          A≈üaƒüƒ±daki men√º kartlarƒ± admin paneli yerine ge√ßecek bir yapƒ±dan
          besleniyor. √úr√ºnler ve i√ßecekler JavaScript i√ßindeki
          <code>menuItems</code> ve <code>drinkItems</code> dizilerinden
          geliyor. Gelecekte bu veri bir API veya veritabanƒ±ndan √ßekilebilir.
        </p>
        <p style="margin-top:6px; line-height:1.4;">
          Sepete eklediƒüin her √ºr√ºn saƒü √ºstteki ‚ÄúSepetim‚Äù paneline d√º≈üer. Sipari≈üi
          tamamladƒ±ƒüƒ±nda adres ve telefon bilgilerini girersin; demo olarak SMS
          kodu √ºretip doƒürular, ardƒ±ndan WhatsApp‚Äôa y√∂nlenirsin.
        </p>
      </div>
    </div>
  </section>

  <!-- MEN√ú -->
  <section class="menu-section" id="menu">
    <div class="menu-head">
      <h2>Men√º</h2>
      <small>√ñrnek fiyatlar ve √ºr√ºnler ¬∑ hepsi deƒüi≈ütirilebilir</small>
    </div>
    <div class="menu-grid" id="menuGrid"></div>
  </section>

  <!-- ƒ∞√áECEKLER -->
  <section class="menu-section">
    <div class="menu-head">
      <h2>ƒ∞√ßecekler</h2>
      <small>Adet se√ßip sepete ekleyebilirsin</small>
    </div>
    <div id="drinkList"></div>
  </section>

</div>

<!-- Sepet Paneli -->
<div class="cart-panel" id="cartPanel">
  <div class="cart-header">
    <h3>Sepet</h3>
    <button class="btn-secondary" onclick="toggleCart()">Kapat</button>
  </div>
  <div class="cart-list" id="cartList"></div>
  <div class="cart-footer">
    <div style="display:flex; justify-content:space-between;">
      <span>Ara toplam</span>
      <span id="subtotalText">‚Ç∫0</span>
    </div>
    <div style="display:flex; justify-content:space-between; font-size:.78rem; margin-top:2px;">
      <span>Teslimat √ºcreti</span>
      <span>‚Ç∫0</span>
    </div>
    <div style="display:flex; justify-content:space-between; margin-top:4px; font-weight:600;">
      <span>Toplam</span>
      <span id="totalText">‚Ç∫0</span>
    </div>
    <button class="btn-checkout" onclick="openCheckout()">Sipari≈üi Tamamla</button>
    <p class="note">Not: √ñdeme kapƒ±da / restoranda. Bu ekran sadece sipari≈üi bize iletmek i√ßindir.</p>
  </div>
</div>

<!-- CHECKOUT MODAL -->
<div class="modal-backdrop" id="checkoutBackdrop">
  <div class="modal">
    <h3>Sipari≈ü Bilgileri</h3>
    <div class="modal-row">
      <label>Ad Soyad *</label>
      <input id="inpName" />
    </div>
    <div class="modal-row">
      <label>Telefon (05xx...) *</label>
      <input id="inpPhone" />
    </div>
    <div class="modal-row">
      <label>Adres *</label>
      <textarea id="inpAddress"></textarea>
    </div>
    <div class="modal-row">
      <label>Teslimat tipi</label>
      <select id="selDelivery">
        <option value="Adrese Teslim">Adrese Teslim</option>
        <option value="Gel-Al">Gel-Al</option>
      </select>
    </div>
    <div class="modal-row">
      <label>Not (isteƒüe baƒülƒ±)</label>
      <textarea id="inpNote" placeholder="Soƒüan olmasƒ±n, acƒ± sos ekleyin vb."></textarea>
    </div>

    <div class="modal-row">
      <label>Telefon Doƒürulama</label>
      <div class="otp-row">
        <button class="btn-primary" type="button" onclick="sendOtp()">Kodu G√∂nder</button>
        <input id="inpOtp" placeholder="6 haneli kod" />
        <button class="btn-secondary" type="button" onclick="verifyOtp()">Onayla</button>
      </div>
      <p class="note">≈ûu anda demo modunda: kod tarayƒ±cƒ±da √ºretiliyor. Ger√ßek SMS entegrasyonu i√ßin backend gerekir.</p>
    </div>

    <div class="modal-actions">
      <button class="btn-secondary" type="button" onclick="closeCheckout()">Vazge√ß</button>
      <button class="btn-primary" type="button" onclick="forceWhatsappWithoutOtp()">Kodsuz WhatsApp (Test)</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
  // Konfig√ºrasyon ve durum deƒüi≈ükenleri
  const config = {
    whatsappNumber: '905000000000', // Ayar panelinden deƒüi≈ütirilir
  };

  const menuItems = [
    {
      id: 1,
      kategori: 'D√∂ner',
      name: 'Pilav√ºst√º Tavuk D√∂ner',
      price: 250,
      descMain: 'Tane tane pirin√ß pilavƒ± √ºzerinde ince dilim tavuk d√∂ner, patates ve domates.',
      descExtra: 'Soƒüan / sos tercihini sipari≈ü notunda belirtebilirsin.'
    },
    {
      id: 2,
      kategori: 'D√∂ner',
      name: 'Pilav√ºst√º Et D√∂ner',
      price: 320,
      descMain: 'Dana et d√∂ner, pilav, k√∂z biber, domates ile premium sunum.',
      descExtra: 'Gramaj bilgisi notlarda √∂zelle≈ütirilebilir.'
    },
    {
      id: 3,
      kategori: 'D√ºr√ºm',
      name: 'Lava≈ü D√ºr√ºm (Tavuk)',
      price: 120,
      descMain: '√ñzel lava≈üta tavuk d√∂ner, mevsim ye≈üillik ve tur≈üu.',
      descExtra: 'ƒ∞steƒüe baƒülƒ± patates, ket√ßap, mayonez eklenebilir.'
    },
    {
      id: 4,
      kategori: 'Sandvi√ß',
      name: 'Yarƒ±m Ekmek D√∂ner',
      price: 80,
      descMain: 'ƒ∞nce dilim tavuk d√∂ner, tur≈üu, patates ve sos.',
      descExtra: 'Sos miktarƒ± not kƒ±smƒ±nda belirtilebilir.'
    },
    {
      id: 5,
      kategori: '√ñzel',
      name: 'Sƒ±nƒ±rsƒ±z Porsiyon (Mek√¢nda)',
      price: 350,
      descMain: 'ƒ∞nce dilim tavuk d√∂ner, mevsim salata, pilav, patates ile sƒ±nƒ±rsƒ±z porsiyon.',
      descExtra: 'Yalnƒ±zca mek√¢nda ge√ßerlidir, ki≈üi ba≈üƒ± servis yapƒ±lƒ±r.'
    }
  ];

  const drinkItems = [
    { id: 101, name: 'Kola (33 cl)', price: 50 },
    { id: 102, name: 'Ayran (30 cl)', price: 35 },
    { id: 103, name: '≈ûalgam', price: 40 },
    { id: 104, name: 'Su', price: 20 }
  ];

  let drinkQuantities = {}; // id -> qty
  drinkItems.forEach(d => drinkQuantities[d.id] = 0);

  const cart = [];
  let currentOtp = null;

  // Yardƒ±mcƒ±lar
  function formatPrice(v) {
    return '‚Ç∫' + v.toLocaleString('tr-TR');
  }

  function showToast(msg) {
    const el = document.getElementById('toast');
    el.textContent = msg;
    el.classList.add('show');
    setTimeout(() => el.classList.remove('show'), 2500);
  }

  // Men√º render
  function renderMenu() {
    const grid = document.getElementById('menuGrid');
    grid.innerHTML = '';
    menuItems.forEach(item => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div class="card-top">
          <div>
            <div class="card-title">${item.name}</div>
            <div class="card-desc">${item.descMain}</div>
            <div class="card-extra">${item.descExtra || ''}</div>
          </div>
          <div style="text-align:right;">
            <div class="card-price">${formatPrice(item.price)}</div>
            <div class="badge-cat">${item.kategori}</div>
          </div>
        </div>
        <div class="card-actions">
          <span style="font-size:.78rem; color:#bcbcbc;">Sessiz l√ºks ¬∑ sokak lezzeti</span>
          <button class="btn-add" onclick="addFoodToCart(${item.id})">Sepete ekle</button>
        </div>
      `;
      grid.appendChild(card);
    });
  }

  // ƒ∞√ßecekler render
  function renderDrinks() {
    const list = document.getElementById('drinkList');
    list.innerHTML = '';
    drinkItems.forEach(drink => {
      const row = document.createElement('div');
      row.className = 'drink-row';
      row.innerHTML = `
        <div>
          <div class="drink-name">${drink.name}</div>
          <div style="font-size:.76rem; color:#bcbcbc;">Soƒüuk servis edilir.</div>
        </div>
        <div class="qty-box">
          <span class="drink-price">${formatPrice(drink.price)}</span>
          <button onclick="changeDrinkQty(${drink.id}, -1)">-</button>
          <span id="drinkQty${drink.id}">${drinkQuantities[drink.id]}</span>
          <button onclick="changeDrinkQty(${drink.id}, 1)">+</button>
          <button class="btn-add" style="margin-left:4px; font-size:.7rem;" onclick="addDrinkToCart(${drink.id})">Sepete</button>
        </div>
      `;
      list.appendChild(row);
    });
  }

  // Sepet i≈ülemleri
  function addFoodToCart(id) {
    const item = menuItems.find(x => x.id === id);
    if (!item) return;
    const existing = cart.find(x => x.type === 'food' && x.id === id);
    if (existing) existing.qty += 1;
    else cart.push({ type: 'food', id: item.id, name: item.name, price: item.price, qty: 1 });
    updateCartUI();
    showToast(item.name + ' sepete eklendi');
  }

  function changeDrinkQty(id, delta) {
    let q = drinkQuantities[id] || 0;
    q += delta;
    if (q < 0) q = 0;
    drinkQuantities[id] = q;
    document.getElementById('drinkQty' + id).textContent = q;
  }

  function addDrinkToCart(id) {
    const drink = drinkItems.find(x => x.id === id);
    if (!drink) return;
    const qty = drinkQuantities[id] || 0;
    if (qty <= 0) {
      showToast('L√ºtfen √∂nce adet se√ß.');
      return;
    }
    const existing = cart.find(x => x.type === 'drink' && x.id === id);
    if (existing) existing.qty += qty;
    else cart.push({ type: 'drink', id: drink.id, name: drink.name, price: drink.price, qty });
    drinkQuantities[id] = 0;
    document.getElementById('drinkQty' + id).textContent = '0';
    updateCartUI();
    showToast(drink.name + ' sepete eklendi');
  }

  function updateCartUI() {
    const list = document.getElementById('cartList');
    list.innerHTML = '';
    let subtotal = 0;
    cart.forEach((item, index) => {
      subtotal += item.price * item.qty;
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <div class="cart-item-top">
          <span>${item.name}</span>
          <span>${formatPrice(item.price)}</span>
        </div>
        <div class="cart-item-bottom">
          <div class="qty-box">
            <button onclick="changeCartQty(${index}, -1)">-</button>
            <span>${item.qty}</span>
            <button onclick="changeCartQty(${index}, 1)">+</button>
          </div>
          <div>
            <span style="margin-right:6px;">${formatPrice(item.price * item.qty)}</span>
            <button class="btn-secondary" style="font-size:.7rem; padding:2px 6px;" onclick="removeCartItem(${index})">Sil</button>
          </div>
        </div>
      `;
      list.appendChild(div);
    });

    document.getElementById('subtotalText').textContent = formatPrice(subtotal);
    document.getElementById('totalText').textContent = formatPrice(subtotal);
    document.getElementById('cartCount').textContent = cart.reduce((a,c)=>a+c.qty,0);
  }

  function changeCartQty(index, delta) {
    const item = cart[index];
    if (!item) return;
    item.qty += delta;
    if (item.qty <= 0) cart.splice(index,1);
    updateCartUI();
  }

  function removeCartItem(index) {
    cart.splice(index,1);
    updateCartUI();
  }

  function toggleCart() {
    const panel = document.getElementById('cartPanel');
    panel.classList.toggle('open');
  }

  function scrollToMenu() {
    document.getElementById('menu').scrollIntoView({ behavior:'smooth' });
  }

  // Checkout / OTP / WhatsApp
  function openCheckout() {
    if (cart.length === 0) {
      showToast('Sepet bo≈ü, √∂nce √ºr√ºn ekle.');
      return;
    }
    document.getElementById('checkoutBackdrop').classList.add('open');
  }

  function closeCheckout() {
    document.getElementById('checkoutBackdrop').classList.remove('open');
  }

  function validateForm() {
    const name = document.getElementById('inpName').value.trim();
    const phone = document.getElementById('inpPhone').value.trim();
    const address = document.getElementById('inpAddress').value.trim();
    if (!name || !phone || !address) {
      showToast('L√ºtfen ad, telefon ve adres alanlarƒ±nƒ± doldur.');
      return false;
    }
    return true;
  }

  function sendOtp() {
    if (!validateForm()) return;
    const phone = document.getElementById('inpPhone').value.trim();
    if (!phone.startsWith('05') && !phone.startsWith('5')) {
      showToast('Telefon numarasƒ±nƒ± 05xx ≈üeklinde gir.');
      return;
    }
    // DEMO: Rastgele 6 haneli kod √ºret
    currentOtp = String(Math.floor(100000 + Math.random()*900000));
    console.log('DEMƒ∞ OLU≈ûTURULAN OTP:', currentOtp);
    showToast('Demo kod √ºretildi. Konsolda g√∂rebilirsin.');

    /*
    GER√áEK NETGSM / BACKEND ENTEGRASYONU ƒ∞√áƒ∞N √ñRNEK:
    fetch('/api/send-otp', {
      method:'POST',
      headers:{ 'Content-Type':'application/json' },
      body: JSON.stringify({ phone })
    }).then(r=>r.json()).then(res=>{
      // success / error kontrol√º yapƒ±lƒ±r
    });
    */
  }

  function verifyOtp() {
    const val = document.getElementById('inpOtp').value.trim();
    if (!currentOtp) {
      showToast('√ñnce "Kodu G√∂nder" butonuna bas.');
      return;
    }
    if (val !== currentOtp) {
      showToast('Kod hatalƒ±, tekrar dene.');
      return;
    }
    showToast('Telefon doƒürulandƒ±, WhatsApp a√ßƒ±lƒ±yor...');
    sendOrderToWhatsapp();
  }

  function forceWhatsappWithoutOtp() {
    if (!validateForm()) return;
    sendOrderToWhatsapp();
  }

  function sendOrderToWhatsapp() {
    const name = document.getElementById('inpName').value.trim();
    const phone = document.getElementById('inpPhone').value.trim();
    const address = document.getElementById('inpAddress').value.trim();
    const delivery = document.getElementById('selDelivery').value;
    const note = document.getElementById('inpNote').value.trim();

    let subtotal = 0;
    let lines = [];
    cart.forEach(item => {
      const lineTotal = item.price * item.qty;
      subtotal += lineTotal;
      lines.push(`${item.qty} x ${item.name} ‚Äì ${lineTotal} TL`);
    });

    let msg = `Troia D√∂ner Online Sipari≈ü\n\n` +
              `Sipari≈ü Detaylarƒ±:\n` +
              lines.join('\n') +
              `\n\nToplam: ${subtotal} TL\n\n` +
              `M√º≈üteri: ${name}\n` +
              `Telefon: ${phone}\n` +
              `Adres: ${address}\n` +
              `Teslimat: ${delivery}\n`;
    if (note) msg += `Not: ${note}\n`;

    const waNum = config.whatsappNumber;
    const url = `https://api.whatsapp.com/send?phone=${waNum}&text=${encodeURIComponent(msg)}`;
    window.location.href = url;
  }

  // Ayar paneli ile ba≈ülƒ±k / logo / WA numarasƒ± g√ºncelleme
  function bindSettings() {
    const setLogo = document.getElementById('setLogo');
    const setTitle = document.getElementById('setTitle');
    const setSlogan = document.getElementById('setSlogan');
    const setWa = document.getElementById('setWa');
    const logoImg = document.getElementById('logoImg');
    const siteTitle = document.getElementById('siteTitle');
    const siteSlogan = document.getElementById('siteSlogan');

    setLogo.addEventListener('input', () => {
      const v = setLogo.value.trim();
      if (v) {
        logoImg.src = v;
        logoImg.style.display = 'block';
      } else {
        logoImg.style.display = 'none';
      }
    });
    setTitle.addEventListener('input', () => {
      siteTitle.innerHTML = setTitle.value.replace('TROIA','<span>TROIA</span>');
    });
    setSlogan.addEventListener('input', () => {
      siteSlogan.textContent = setSlogan.value;
    });
    setWa.addEventListener('input', () => {
      config.whatsappNumber = setWa.value.trim();
    });

    // Ba≈ülangƒ±√ßta config‚Äôi g√ºncelle
    config.whatsappNumber = setWa.value.trim();
  }

  document.addEventListener('DOMContentLoaded', () => {
    renderMenu();
    renderDrinks();
    updateCartUI();
    bindSettings();
  });
</script>
</body>
</html>
